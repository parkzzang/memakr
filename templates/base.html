{% load static %}
<!doctype html>
<html lang="ko">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <!-- âœ… Bootstrap CSS (í•„ìˆ˜) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- Custom Font -->
    <style>
        @font-face {
            font-family: 'NotoSansKR-SemiBold';
            src: url("{% static 'fonts/NotoSansKR-SemiBold.ttf' %}") format('truetype');
            font-weight: 800;
            font-style: normal;
        }

        body {
            font-family: 'NotoSansKR-SemiBold', sans-serif;
        }

        .mobile-title {
          transition: opacity 0.3s ease, visibility 0.3s ease;
        }
    
        .mobile-title.hide {
          opacity: 0;
          visibility: hidden;
        }

        .glow-text {
          position: relative;
          color: #fff8dc; /* í¬ë¦¼ë¹› í°ìƒ‰ */
          font-size: 2rem;
          text-shadow:
            0 0 3px #fff8dc,
            0 0 6px #ffe066,
            0 0 10px #ffcc00;
          animation: yellowGlow 3s ease-in-out infinite;
        }

        @keyframes yellowGlow {
          0%, 100% {
            text-shadow:
              0 0 3px #fff8dc,
              0 0 6px #ffe066,
              0 0 10px #ffcc00;
          }
          50% {
            text-shadow:
              0 0 2px #fff3b0,
              0 0 4px #ffd700,
              0 0 6px #ffb700;
          }
        }

        body {
          overflow-y: scroll; /* í•­ìƒ ì„¸ë¡œ ìŠ¤í¬ë¡¤ ê³µê°„ í™•ë³´ */
        }

        button[type="submit"]:hover {
          background-color: #5936a2 !important;
        }

        /* í˜¸ë²„ ì‹œ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ í‘œì‹œ */
        .hover-dropdown:hover > .dropdown-menu {
          display: block;
          margin-top: 0.5rem;
          animation: fadeIn 0.2s ease-in-out;
        }

        /* ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ */
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(5px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* ì´ˆê¸° ìƒíƒœ ìˆ¨ê¹€ */
        .dropdown-menu.custom-fade {
          opacity: 0;
          visibility: hidden;
          transform: translateY(5px);
          transition: all 0.2s ease-in-out;
          display: block !important; /* Bootstrapì´ display:none ì²˜ë¦¬í•˜ëŠ” ê²ƒ ë¬´ë ¥í™” */
        }

        /* ë³´ì´ê²Œ í•  ë•Œ */
        .dropdown-menu.custom-fade.showing {
          opacity: 1;
          visibility: visible;
          transform: translateY(0);
        }

        
</style>

</style>

    </style>
    <title>ë‚˜ë§Œì˜ ë°ˆ ì°½ì‘ì†Œ</title>
</head>
<body>
<!-- âœ… ë°˜ì‘í˜• í—¤ë” with í–„ë²„ê±° ë©”ë‰´ -->
<nav class="navbar navbar-expand-lg" style="
  background: linear-gradient(80deg, #5A3FA0, #A084CA);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
">

    <div class="container">
  
      <!-- 1. ì™¼ìª½: í–„ë²„ê±° ë²„íŠ¼ (ëª¨ë°”ì¼ìš©) -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
        aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
      </button>

    <!-- ì œëª© (ëª¨ë°”ì¼ ì¤‘ì•™, ë°ìŠ¤í¬íƒ‘ ì™¼ìª½) -->
    <a class="navbar-brand fw-bold d-none d-lg-block text-white glow-text" href="/">
      ë‚˜ë§Œì˜ ë°ˆ ì°½ì‘ì†Œ
    </a>
    
  
    <!-- ëª¨ë°”ì¼ ì „ìš© ì¤‘ì•™ ì œëª© -->
    <div class="mobile-title position-absolute top-50 start-50 translate-middle d-block d-lg-none">
        <a class="navbar-brand fw-bold text-white glow-text" href="/" style="font-size: 1.2rem;">
          ë‚˜ë§Œì˜ ë°ˆ ì°½ì‘ì†Œ
        </a>
      </div>
  
  
      <!-- ë„¤ë¹„ê²Œì´ì…˜ ë§í¬ -->
      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <!-- ë°ˆ í…œí”Œë¦¿ -->
          <!-- ğŸ’» ë°ìŠ¤í¬íƒ‘: ë“œë¡­ë‹¤ìš´ -->
          <li class="nav-item dropdown d-none d-lg-block position-relative" id="hoverDropdown">
            <a class="nav-link dropdown-toggle text-white fw-semibold" href="#" role="button" id="memeDropdown">
              ğŸ¨ ë°ˆ í…œí”Œë¦¿
            </a>
            <ul class="dropdown-menu mt-1 shadow" style="top: 100%; left: 0;">
              {% for item in meme_menu %}
                <li><a class="dropdown-item" href="/{{ item.slug }}/">{{ item.emoji }} {{ item.name }}</a></li>
              {% endfor %}
            </ul>
          </li>
          

        
          <!-- ğŸ“± ëª¨ë°”ì¼: í¼ì³ì§„ ë§í¬ -->
          <li class="nav-item d-block d-lg-none text-white fw-semibold">
            <span class="nav-link text-white fw-bold">ğŸ¨ ë°ˆ í…œí”Œë¦¿</span>
          </li>
          {% for item in meme_menu %}
          <li class="nav-item d-block d-lg-none">
            <a class="nav-link text-white ps-4" href="/{{ item.slug }}/">
              {{ item.emoji }} {{ item.name }}
            </a>
          </li>
          {% endfor %}

          <!-- ì¼ë°˜ ë©”ë‰´ -->
          <li class="nav-item">
            <a class="nav-link text-white fw-semibold" href="/">ğŸŒ ë©”ì¸</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white fw-semibold" href="/community/">ğŸ‘¥ ì»¤ë®¤ë‹ˆí‹°</a>
          </li>
                  
        </ul>
      
        <!-- ğŸ” ì¸ì¦ ë©”ë‰´ (ì˜¤ë¥¸ìª½) -->
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
          {% if user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link text-white fw-semibold" href="{% url 'main:logout' %}">
                {{ user.username }} (ë¡œê·¸ì•„ì›ƒ)
              </a>
            </li>
          {% else %}
            <li class="nav-item">
              <a class="nav-link text-white fw-semibold" href="{% url 'main:login' %}">ë¡œê·¸ì¸</a>
            </li>
            <li class="nav-item">
              <a class="nav-link text-white fw-semibold" href="{% url 'main:signup' %}">íšŒì›ê°€ì…</a>
            </li>
          {% endif %}
        </ul>
      </div>

      <!-- ì–¸ì–´ ì„ íƒ -->
      <form id="langSelect" class="mobile-title">
        <select class="form-select-sm w-auto rounded-pill shadow-sm">
          <option value="ko">í•œêµ­ì–´</option>
          <option value="en">English</option>
          <option value="jp">æ—¥æœ¬èª</option>
          <option value="zh">ä¸­æ–‡</option>
        </select>
      </form>
      
    </div>
  </nav>
  
<!-- ê¸°ë³¸ í…œí”Œë¦¿ ì•ˆì— ì‚½ì…ë  ë‚´ìš© Start -->
{% block content %}
{% endblock %}
<!-- ê¸°ë³¸ í…œí”Œë¦¿ ì•ˆì— ì‚½ì…ë  ë‚´ìš© End -->
    <!-- 6. í‘¸í„° -->
    <footer class="container text-center py-4 mt-5 border-top">
       <div class="dev-info text-muted">
         &copy; 2025 | ë‚˜ë§Œì˜ ë°ˆ ì°½ì‘ì†Œ (Meme Maker)
       </div>
     </footer>

     <!-- âœ… Bootstrap JS (ì„ íƒì‚¬í•­) -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
     <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ Start -->
     {% block script %}
     {% endblock %}
     <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ End -->
     <script>
      document.addEventListener('DOMContentLoaded', function () {
        const navCollapse = document.getElementById('mainNav');
        const mobileTitle = document.querySelector('.mobile-title');
        const langSelect = document.getElementById('langSelect');
    
        navCollapse.addEventListener('show.bs.collapse', function () {
          mobileTitle.classList.add('hide');
          langSelect.classList.add('d-none');
        });
    
        navCollapse.addEventListener('hidden.bs.collapse', function () {
          // 1. d-none ì œê±° â†’ ë‹¤ì‹œ DOMì— ë³´ì´ê²Œ
          langSelect.classList.remove('d-none');
    
          // 2. ì¦‰ì‹œ opacity: 0 ìƒíƒœ ìœ ì§€ (hide ìœ ì§€)
          langSelect.classList.add('hide');
    
          // 3. ë‹¤ìŒ í”„ë ˆì„ì—ì„œ hide ì œê±° â†’ íŠ¸ëœì§€ì…˜ ë°œìƒ
          setTimeout(() => {
            langSelect.classList.remove('hide');
          }, 5);
        });
    
        navCollapse.addEventListener('hide.bs.collapse', function () {
          mobileTitle.classList.remove('hide');
        });
      });

      document.addEventListener("DOMContentLoaded", function () {
        const hoverItem = document.getElementById('hoverDropdown');
        const dropdownMenu = hoverItem.querySelector('.dropdown-menu');
            
        // ì»¤ìŠ¤í…€ ë“œë¡­ë‹¤ìš´ ìŠ¤íƒ€ì¼ ì ìš©
        dropdownMenu.classList.add('custom-fade');
            
        let timer;
            
        hoverItem.addEventListener('mouseenter', () => {
          clearTimeout(timer);
          dropdownMenu.classList.add('showing');
        });
      
        hoverItem.addEventListener('mouseleave', () => {
          timer = setTimeout(() => {
            dropdownMenu.classList.remove('showing');
          }, 100);
        });
      });

    </script>
</body>
</html>